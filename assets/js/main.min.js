var correct;function checkFeedback(){correct=!0;var e=checkTitle(),t=CheckMessage();correct&&$.ajax({url:"logic/feedback.php",method:"POST",dataType:"json",data:{title:e,textarea2:t,btnFeedback:!0},success:function(e){document.getElementById("resultMessage").innerHTML="Your message has been sent successfully",document.getElementById("title").value="",document.getElementById("textarea2").value="",setInterval(function(){document.getElementById("resultMessage").innerHTML=""},5e3),$("input#input_text, textarea#textarea2").characterCounter()},error:function(e){500==e||409==e||404==e?document.getElementById("resultMessage").innerHTML="Problem has been occured.":422==e&&(document.getElementById("resultMessage").innerHTML="Data is not defined.")}})}function checkTitle(){let e=document.getElementById("title");return checkMyTextBox(e.value.trim(),/.{2,100}/,e.nextElementSibling,"Enter title")}function CheckMessage(){let e=document.getElementById("textarea2").value;return""==(e=e.trim())?(correct=!1,document.getElementById("textarea2").nextElementSibling.innerHTML="<i class='fas fa-exclamation-circle mr-2'></i>Enter your message.",0):(document.getElementById("textarea2").nextElementSibling.innerHTML="",e)}function checkLogin(){correct=!0;checkUsername(),checkPassword();return!!correct}function checkUsername(){let e=document.getElementById("username");return checkMyTextBox(e.value.trim(),/^[a-z]+([_-]?[a-z0-9]){4,40}$/,e.nextElementSibling,"Username must have at least five characters and start with a letter. All characters must be non-capital letters.")}function checkPassword(){let e=document.getElementById("password");return checkMyTextBox(e.value.trim(),/.{6,}/,e.nextElementSibling,"Password must have at least six characters.")}function checkMyTextBox(e,t,n,a){return t.test(e)?(n.innerHTML="",e):(n.innerHTML="<i class='fas fa-exclamation-circle mr-2'></i>"+a,correct=!1,0)}function deleteCategory(e){let t=e.next().html(),n=e.data("cid");console.log(n),console.log(t),Swal.fire({title:`Are you sure you want to delete category ${t}?`,text:"This will also delete all mysteries from this category!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.value&&$.ajax({url:"logic/deleteCategory.php",dataType:"json",method:"post",data:{category:n,categoryRequest:!0},success:function(e){location.reload()},error:function(e){500==e&&Swal.fire({icon:"warning",title:"Error has been occured"})}})})}function deleteMystery(e){let t=e.parent().next().html(),n=e.data("mid");console.log(t),console.log(n),Swal.fire({title:`Are you sure you want to delete mystery ''${t}''?`,text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.value&&$.ajax({url:"logic/deleteMystery.php",dataType:"json",method:"post",data:{mystery:n,mysteryRequest:!0},success:function(e){location.reload()},error:function(e){500==e&&Swal.fire({icon:"warning",title:"Error has been occured"})}})})}function checkCategory(){return""==document.getElementById("categoryName").value?(document.getElementById("categoryName").nextElementSibling.innerHTML="Enter category name",!1):""!=document.getElementById("fileName").value||($(".file").html("Insert image"),!1)}function checkMystery(){let e=!0;return""==$("#mysteryName").val()&&($("#mysteryName").next().html("Enter mystery name"),e=!1),"0"==document.getElementById("selectCategory").value&&($("#sel").html("Choose category"),e=!1),""==document.getElementById("fileCat").value&&($("#filem").html("Insert image"),e=!1),""==document.getElementById("textarea2").value&&($("#textarea2").next().html("Enter mystery"),e=!1),!!e}function checkEditC(){return"0"!=document.getElementById("editc").value}function checkEditM(){return"0"!=document.getElementById("editm").value}$(document).ready(function(){$(".sidenav").sidenav();var e=document.querySelector(".collapsible.expandable");M.Collapsible.init(e,{accordion:!1});$(window).scroll(function(){$(window).scrollTop()>=56?$("#addBecomeFixed").addClass("becomeFixed"):$("#addBecomeFixed").removeClass("becomeFixed")}),$(document).ready(function(){$("select").formSelect()}),$(document).ready(function(){$("#modalAuthor").modal()}),$(document).ready(function(){$("input#input_text, textarea#textarea2").characterCounter()}),$("#btnFeedback").on("click",function(e){e.preventDefault(),checkFeedback()}),$("body").on("click","a.intBor",function(e){e.preventDefault();let t=$(this),n=$(this).data("like"),a=$(this).parent().parent().data("id");$.ajax({url:"logic/interesting.php",dataType:"json",method:"post",data:{mystery:a,interesting:n,interestingRequest:!0},success:function(e){t.addClass("backgroundClick"),t.find("span").html(e)},error:function(e){500==e?alert("Error has been occured"):404==e&&alert("Necessary page not found")}})}),$("body").on("click","a.dc",function(e){e.preventDefault(),deleteCategory($(this))}),$(".dm").click(function(e){e.preventDefault(),deleteMystery($(this))})});